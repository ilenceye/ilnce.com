---
import Icon from "@/components/Icon.astro";

interface Props {
  value: number;
  max?: number;
}

const { value, max = 5 } = Astro.props;
---

<div class="flex gap-0.5">
  {
    Array.from({ length: max }, (_, i) => {
      const fillPercent = Math.min(Math.max(value - i, 0), 1) * 100;

      return (
        <span class="relative inline-flex size-4 items-center justify-center select-none">
          <Icon
            id="star-filled"
            class="text-gray-300"
            fill="currentColor"
            stroke-width={0}
          />
          {fillPercent > 0 && (
            <Icon
              id="star-filled"
              class="absolute inset-0 size-4 text-yellow-400"
              style={{ clipPath: `inset(0 ${100 - fillPercent}% 0 0)` }}
              fill="currentColor"
              stroke-width={0}
            />
          )}
        </span>
      );
    })
  }
</div>
